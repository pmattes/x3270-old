<html>
<head>
<title>tcl3270 Manual Page</title>
<link HREF="http://www.w3.org/StyleSheets/Core/Steely" TYPE="text/css" REL="stylesheet">
</head>
<body>
<h1>tcl3270 Manual Page</h1>
<h2>Contents</h2>
<blockquote>
<a HREF="#Name">Name</a><br>
<a HREF="#Synopsis">Synopsis</a><br>
<a HREF="#Description">Description</a><br>
<a HREF="#Options">Options</a><br>
<a HREF="#Character-Sets">Character Sets</a><br>
<a HREF="#NVT-ANSI-Mode">NVT (ANSI) Mode</a><br>
<a HREF="#Toggles">Toggles</a><br>
<a HREF="#Commands">Commands</a><br>
<a HREF="#File-Transfer">File Transfer</a><br>
<a HREF="#Nested-Scripts">Nested Scripts</a><br>
<a HREF="#Passthru">Passthru</a><br>
<a HREF="#Proxy">Proxy</a><br>
<a HREF="#Resources">Resources</a><br>
<a HREF="#See-Also">See Also</a><br>
<a HREF="#Copyrights">Copyrights</a><br>
<a HREF="#Version">Version</a><br>
</blockquote>
<a NAME="Name"></a><h2>Name</h2>
tcl3270 -
<font size=-1>IBM</font> host access tool
<a NAME="Synopsis"></a><h2>Synopsis</h2>
<b>tcl3270</b>
[<i>script</i>]
[<i>options</i>]
[<i>host</i>]
[-- <i>script-arg</i>...]


<a NAME="Description"></a><h2>Description</h2>
<b>tcl3270</b> opens
a telnet connection to an <font size=-1>IBM</font>
host, then allows a tcl script to control the host login
session.
It is derived from
<a HREF="x3270-man.html"><i>x3270</i>(1)</a>,
an X-windows IBM 3270 emulator.
It implements RFCs 2355 (TN3270E), 1576 (TN3270) and 1646 (LU name selection),
and supports IND$FILE file transfer.
<p>
The full syntax for <i>host</i> is:
<blockquote>[<i>prefix</i>:]...[<i>LUname</i>@]<i>hostname</i>[:<i>port</i>]</blockquote>
<p>
Prepending a <b>P:</b> onto <i>hostname</i> causes the connection to go
through the <i>telnet-passthru</i> service rather than directly to the host.
See <a HREF="#Passthru"><font size=-1>PASSTHRU</font></a> below.
<p>
Prepending an <b>S:</b> onto <i>hostname</i> removes the "extended data
stream" option reported to the host.
See <a HREF="#tn"><b>-tn</b></a> below for further information.
<p>
Prepending an <b>N:</b> onto <i>hostname</i>
turns off TN3270E support for the session.
<p>
Prepending an <b>L:</b> onto <i>hostname</i>
causes <b>tcl3270</b> to first create an SSL tunnel to the host, and then
create a TN3270 session inside the tunnel.  (This function is supported only if
<b>tcl3270</b> was built with SSL/TLS support).
Note that TLS-encrypted sessions using the TELNET START-TLS option are
negotiated with the host automatically; for these sessions the <b>L:</b> prefix
should not be used.
<p>
A specific Logical Unit (LU) name to use may be specified by prepending it to
the <i>hostname</i> with an `<b>@</b>'.
Multiple LU names to try can be separated by commas.
An empty LU can be placed in the list with an extra comma.
(Note that the LU name is used for different purposes by different kinds of
hosts.
For example, CICS uses the LU name as the Terminal ID.)
<p>
The <i>hostname</i> may optionally be placed inside square-bracket
characters `<b>[</b>' and `<b>]</b>'.
This will prevent any colon `<b>:</b>' characters in the hostname
from being interpreted as indicating option prefixes or port numbers.
This allows numeric IPv6 addresses to be used as hostnames.
<p>
On systems that support the <i>forkpty</i> library call, the
<i>hostname</i> may be replaced with <b>-e</b> and a command string.
This will cause <b>tcl3270</b> to connect to a local child process, such as
a shell.
<p>
The port to connect to defaults to
<b>telnet</b>.
This can be overridden with the <b>-port</b> option, or by appending
a <i>port</i> to the <i>hostname</i> with a colon
`<b>:</b>'.
(For compatability with previous versions of <b>tcl3270</b>
and with <i>tn3270</i>(1), the <i>port</i>
may also be specified as a second, separate argument.)

<a NAME="Options"></a><h2>Options</h2>
 <b>tcl3270</b> understands
the following options:<dl>
<dt><b>-charset</b> <i>name</i></dt><dd>
Specifies an <font size=-1>EBCDIC</font> host character set.
See <a HREF="#Character-Sets"><font size=-1>CHARACTER SETS</font></a> below.
<dt><b>-clear</b> <i>toggle</i></dt><dd>
Sets the initial value of <i>toggle</i> to <b>false</b>.
The list of toggle names is under <a HREF="#Toggles"><font size=-1>TOGGLES</font></a>
below.
<dt><b>-im</b> <i>method</i></dt><dd>
Specifies the name of the input method to use for multi-byte input.
(Supported only when tcl3270 is compiled with DBCS support.)
<dt><b>-km</b> <i>name</i></dt><dd>
Specifies the local encoding method for multi-byte text.
<i>name</i> is an encoding name recognized by the ICU library.
(Supported only when tcl3270 is compiled with DBCS support, and necessary
only when tcl3270 cannot figure it out from the locale.)
<dt><b>-model</b> <i>name</i></dt><dd>
The model of 3270 display to be emulated.
The model name is in two parts, either of which may be omitted:
<p>
The first part is the
<b>base model</b>,
which is either <b>3278</b> or <b>3279</b>.
<b>3278</b> specifies a monochrome (green on black) 3270 display;
<b>3279</b> specifies a color 3270 display.
<p>
The second part is the
<b>model number</b>,
which specifies the number of rows and columns.
Model 4 is the default.
<p>
<table BORDER cols=3 width="75%">
<tr><td ><center>Model Number</center></td>	<td ><center>Columns</center></td>	<td ><center>Rows</center></td></tr>

<tr><td ><center>2</center></td>	<td ><center>80</center></td>	<td ><center>24</center></td></tr>
<tr><td ><center>3</center></td>	<td ><center>80</center></td>	<td ><center>30</center></td></tr>
<tr><td ><center>4</center></td>	<td ><center>80</center></td>	<td ><center>43</center></td></tr>
<tr><td ><center>5</center></td>	<td ><center>132</center></td>	<td ><center>27</center></td></tr>
</table>
<p>
Note: Technically, there is no such 3270 display as a 3279-4 or 3279-5, but
most hosts seem to work with them anyway.
<p>
The default model
is <b>3278-4</b>.
<dt><b>-oversize</b> <i>cols</i><b>x</b><i>rows</i></dt><dd>
Makes the screen larger than the default for the chosen model number.
This option has effect only in combination with extended data stream support
(controlled by the "tcl3270.extended" resource), and only if the host
supports the Query Reply structured field.
The number of columns multiplied by the number of rows must not exceed
16383 (3fff hex), the limit of 14-bit 3270 buffer addressing.
<dt><b>-port</b> <i>n</i></dt><dd>
Specifies a different <font size=-1>TCP</font> port to connect to.
<i>n</i> can be a name from <b>/etc/services</b> like <b>telnet</b>, or a
number.
This option changes the default port number used for all connections.
(The positional parameter affects only the initial connection.)
<dt><b>-proxy <i>type</i>:<i>host</i>[:<i>port</i>]</b></dt><dd>
Causes <b>tcl3270</b> to connect via the specified proxy, instead of
using a direct connection.
The <i>host</i> can be an IP address or hostname.
The optional <i>port</i> can be a number or a service name.
For a list of supported proxy <i>types</i>, see <a HREF="#Proxy"><font size=-1>PROXY</font></a>
below.
<dt><b>-set</b> <i>toggle</i></dt><dd>
Sets the initial value of <i>toggle</i> to <b>true</b>.
The list of toggle names is under <a HREF="#Toggles"><font size=-1>TOGGLES</font></a>
below.
The <b>-p</b> option of <i>x3270if</i> causes it to use this socket,
instead of pipes specified by environment variables.
<dt><a NAME="tn"></a><b>-tn</b> <i>name</i></dt><dd>
Specifies the terminal name to be transmitted over the telnet connection.
The default name is
<b>IBM-</b><i>model_name</i><b>-E</b>,
for example,
<b>IBM-3278-4-E</b>.
<p>
Some hosts are confused by the <b>-E</b>
suffix on the terminal name, and will ignore the extra screen area on
models 3, 4 and 5.
Prepending an <b>s:</b> on the hostname, or setting the "tcl3270.extended"
resource to "false", removes the <b>-E</b>
from the terminal name when connecting to such hosts.
<p>
The name can also be specified with the "tcl3270.termName" resource.
<dt><b>-trace</b></dt><dd>
Turns on data stream and event tracing at startup.
The default trace file name is
<b>/tmp/x3trc.</b><i>process_id</i>.
<dt><b>-tracefile</b> <i>file</i></dt><dd>
Specifies a file to save data stream and event traces into.
<dt><b>-tracefilesize</b> <i>size</i></dt><dd>
Places a limit on the size of a trace file.
If this option is not specified, or is specified as <b>0</b> or <b>none</b>,
the trace file will be unlimited.
If specified, the trace file cannot already exist, and the (silently enforced)
minimum size is 64 Kbytes.
The value of <i>size</i> can have a <b>K</b> or <b>M</b> suffix, indicating
kilobytes or megabytes respectively.
<dt><b>-xrm</b> "tcl3270.<i>resource</i>: <i>value</i>"</dt><dd>
Sets the value of the named <i>resource</i> to <i>value</i>.
Resources control less common <b>tcl3270</b>
options, and are defined under <a HREF="#Resources"><font size=-1>RESOURCES</font></a> below.
<dt><b>--</b></dt><dd>
Terminates the list of <b>tcl3270</b> options.
Whatever follows will be available to the script in the <b>$argv</b>
tcl variable.
</dl>
<a NAME="Character-Sets"></a><h2>Character Sets</h2>
The <b>-charset</b>
option or the "tcl3270.charset" resource controls the <font size=-1>EBCDIC</font>
host character set used by <b>tcl3270</b>.
Available sets include:
<p>
<table BORDER cols=3 width="75%">
<tr><td ><center>Charset Name</center></td>	<td ><center>Host Code Page</center></td>	<td ><center>Character Set</center></td></tr>

<tr><td ><center>belgian</center></td>	<td ><center>500</center></td>	<td ><center>  iso8859-1</center></td></tr>
<tr><td ><center>belgian-euro</center></td>	<td ><center>1148</center></td>	<td ><center>  iso8859-15</center></td></tr>
<tr><td ><center>bracket</center></td>	<td ><center>37</center></td>	<td ><center>  iso8859-1</center></td></tr>
<tr><td ><center>brazilian</center></td>	<td ><center>275</center></td>	<td ><center>  iso8859-1</center></td></tr>
<tr><td ><center>cp1047</center></td>	<td ><center>1047</center></td>	<td ><center>  iso8859-1</center></td></tr>
<tr><td ><center>cp870</center></td>	<td ><center>870</center></td>	<td ><center>  iso8859-2</center></td></tr>
<tr><td ><center>finnish</center></td>	<td ><center>278</center></td>	<td ><center>  iso8859-1</center></td></tr>
<tr><td ><center>finnish-euro</center></td>	<td ><center>1143</center></td>	<td ><center>  iso8859-15</center></td></tr>
<tr><td ><center>french</center></td>	<td ><center>297</center></td>	<td ><center>  iso8859-1</center></td></tr>
<tr><td ><center>french-euro</center></td>	<td ><center>1147</center></td>	<td ><center>  iso8859-15</center></td></tr>
<tr><td ><center>german</center></td>	<td ><center>273</center></td>	<td ><center>  iso8859-1</center></td></tr>
<tr><td ><center>german-euro</center></td>	<td ><center>1141</center></td>	<td ><center>  iso8859-15</center></td></tr>
<tr><td ><center>greek</center></td>	<td ><center>423</center></td>	<td ><center> iso8859-7</center></td></tr>
<tr><td ><center>hebrew</center></td>	<td ><center>424</center></td>	<td ><center> iso8859-8</center></td></tr>
<tr><td ><center>icelandic</center></td>	<td ><center>871</center></td>	<td ><center>  iso8859-1</center></td></tr>
<tr><td ><center>icelandic-euro</center></td>	<td ><center>1149</center></td>	<td ><center>  iso8859-15</center></td></tr>
<tr><td ><center>italian</center></td>	<td ><center>280</center></td>	<td ><center>  iso8859-1</center></td></tr>
<tr><td ><center>italian-euro</center></td>	<td ><center>1144</center></td>	<td ><center>  iso8859-15</center></td></tr>
<tr><td ><center>japanese</center></td>	<td ><center>1027+300</center></td>	<td ><center>jisx0201.1976-0 + jisx0208.1983-0</center></td></tr>
<tr><td ><center>norwegian</center></td>	<td ><center>277</center></td>	<td ><center>  iso8859-1</center></td></tr>
<tr><td ><center>norwegian-euro</center></td>	<td ><center>1142</center></td>	<td ><center>  iso8859-15</center></td></tr>
<tr><td ><center>russian</center></td>	<td ><center>880</center></td>	<td ><center>koi8-r</center></td></tr>
<tr><td ><center>simplified-chinese</center></td>	<td ><center>836+837</center></td>	<td ><center> iso8859-1 + gb2312.1980-0</center></td></tr>
<tr><td ><center>slovenian</center></td>	<td ><center>870</center></td>	<td ><center>iso8859-2</center></td></tr>
<tr><td ><center>spanish</center></td>	<td ><center>284</center></td>	<td ><center>  iso8859-1</center></td></tr>
<tr><td ><center>spanish-euro</center></td>	<td ><center>1145</center></td>	<td ><center>  iso8859-15</center></td></tr>
<tr><td ><center>thai</center></td>	<td ><center>838</center></td>	<td ><center>iso8859-11 tis620.2529-0</center></td></tr>
<tr><td ><center>turkish</center></td>	<td ><center>1026</center></td>	<td ><center>iso8859-9</center></td></tr>
<tr><td ><center>uk</center></td>	<td ><center>285</center></td>	<td ><center>  iso8859-1</center></td></tr>
<tr><td ><center>uk-euro</center></td>	<td ><center>1146</center></td>	<td ><center>  iso8859-15</center></td></tr>
<tr><td ><center>us-euro</center></td>	<td ><center>1140</center></td>	<td ><center>  iso8859-15</center></td></tr>
<tr><td ><center>us-intl</center></td>	<td ><center>37</center></td>	<td ><center>  iso8859-1</center></td></tr>
</table>
<p>
The default character set is
<b>bracket</b>,
which is useful for common <font size=-1>IBM</font> hosts which use <font size=-1>EBCDIC</font>
codes 0xAD and 0xBD for the `[' and `]' characters,
respectively.
<a NAME="NVT-ANSI-Mode"></a><h2>NVT (ANSI) Mode</h2>
Some hosts use an <font size=-1>ASCII</font> front-end to do initial login negotiation,
then later switch to 3270 mode.
<b>tcl3270</b> will emulate an <font size=-1>ANSI</font> X.64 terminal until the host
places it in 3270 mode (telnet <font size=-1>BINARY</font> and <font size=-1>SEND EOR</font> modes, or
<font size=-1>TN3270E</font> mode negotiation).
<p>
If the host later negotiates to stop functioning in 3270 mode,
<b>tcl3270</b> will return to <font size=-1>ANSI</font> emulation.
<p>
In <font size=-1>NVT</font> mode, <b>tcl3270</b>
supports both character-at-a-time mode and line mode operation.
You may select the mode with a menu option.
When in line mode, the special characters and operational characteristics are
defined by resources:
<p>
<table BORDER cols=3 width="75%">
<tr><td >Mode/Character</td>	<td >Resource</td>	<td >Default</td></tr>

<tr><td >Translate CR to NL</td>	<td >tcl3270.icrnl</td>	<td >true</td></tr>
<tr><td >Translate NL to CR</td>	<td >tcl3270.inlcr</td>	<td >false</td></tr>
<tr><td >Erase previous character</td>	<td >tcl3270.erase</td>	<td >^?</td></tr>
<tr><td >Erase entire line</td>	<td >tcl3270.kill</td>	<td >^U</td></tr>
<tr><td >Erase previous word</td>	<td >tcl3270.werase</td>	<td >^W</td></tr>
<tr><td >Redisplay line</td>	<td >tcl3270.rprnt</td>	<td >^R</td></tr>
<tr><td >Ignore special meaning of next character</td>	<td >tcl3270.lnext</td>	<td >^V</td></tr>
<tr><td >Interrupt</td>	<td >tcl3270.intr</td>	<td >^C</td></tr>
<tr><td >Quit</td>	<td >tcl3270.quit</td>	<td >^\</td></tr>
<tr><td >End of file</td>	<td >tcl3270.eof</td>	<td >^D</td></tr>
</table>
<a NAME="Toggles"></a><h2>Toggles</h2>
<b>tcl3270</b> has a number of configurable modes which may be selected by
the <b>-set</b> and <b>-clear</b> options.
<dl><dt><b>monoCase</b></dt><dd>
If set, <b>tcl3270</b> operates in uppercase-only mode.
<dt><b>blankFill</b></dt><dd>
If set, <b>tcl3270</b> behaves in some un-3270-like ways.
First, when a character is typed into a field, all nulls in the field to the
left of that character are changed to blanks.
This eliminates a common 3270 data-entry surprise.
Second, in insert mode, trailing blanks in a field are treated like nulls,
eliminating the annoying `lock-up' that often occurs when inserting
into an field with (apparent) space at the end.
<dt><b>lineWrap</b></dt><dd>
If set, the <font size=-1>ANSI</font> terminal emulator automatically assumes
a <font size=-1>NEWLINE</font> character when it reaches the end of a line.
</dl>
<p>
The names of the toggles for use with the <b>-set</b>
and <b>-clear</b>
options are as follows:
<p>
<table BORDER cols=2 width="75%">
<tr><td >Option</td>	<td >Name</td></tr>

<tr><td >Monocase</td>	<td >monoCase</td></tr>
<tr><td >Blank Fill</td>	<td >blankFill</td></tr>
<tr><td >Track Cursor</td>	<td >cursorPos</td></tr>
<tr><td >Trace Data Stream</td>	<td >dsTrace</td></tr>
<tr><td >Trace Events</td>	<td >eventTrace</td></tr>
<tr><td >Save Screen(s) in File</td>	<td >screenTrace</td></tr>
<tr><td >Wraparound</td>	<td >lineWrap</td></tr>
</table>
<p>
These names are also used as the first parameter to the <b>Toggle</b>
action.

<a NAME="actions"></a><a NAME="Commands"></a><h2>Commands</h2>
<b>tcl3270</b> supports the following additional tcl commands:
<p>
Actions marked with an asterisk (*) may block, sending data to the host and
possibly waiting for a response.
<p>
<table BORDER cols=2 width="75%">
<tr><td >Ascii</td>	<td >return entire screen contents in <font size=-1>ASCII</font></td></tr>
<tr><td >Ascii <i>length</i></td>	<td >return screen contents at cursor in <font size=-1>ASCII</font></td></tr>
<tr><td >Ascii <i>row</i> <i>col</i> <i>length</i></td>	<td >return screen contents in <font size=-1>ASCII</font></td></tr>
<tr><td >Ascii <i>row</i> <i>col</i> <i>rows</i> <i>cols</i></td>	<td >return screen region in <font size=-1>ASCII</font></td></tr>
<tr><td >AsciiField</td>	<td >return current field in <font size=-1>ASCII</font></td></tr>
<tr><td >*Attn</td>	<td >attention key</td></tr>
<tr><td >BackSpace</td>	<td >move cursor left (or send <font size=-1>ASCII BS</font>)</td></tr>
<tr><td >BackTab</td>	<td >tab to start of previous input field</td></tr>
<tr><td >CircumNot</td>	<td >input "^" in <font size=-1>NVT</font> mode, or "&not;" in 3270 mode</tr></td>
<tr><td >*Clear</td>	<td >clear screen</td></tr>
<tr><td >Cols</td>	<td >report screen size</td></tr>
<tr><td >*Connect <i>host</i></td>	<td >connect to <i>host</i></td></tr>
<tr><td >*CursorSelect</td>	<td >Cursor Select <font size=-1>AID</font></td></tr>
<tr><td >Delete</td>	<td >delete character under cursor (or send <font size=-1>ASCII DEL</font>)</td></tr>
<tr><td >DeleteField</td>	<td >delete the entire field</td></tr>
<tr><td >DeleteWord</td>	<td >delete the current or previous word</td></tr>
<tr><td >*Disconnect</td>	<td >disconnect from host</td></tr>
<tr><td >Down</td>	<td >move cursor down</td></tr>
<tr><td >Dup</td>	<td >duplicate field</td></tr>
<tr><td >Ebcdic</td>	<td >return entire screen contents in <font size=-1>EBCDIC</font></td></tr>
<tr><td >Ebcdic <i>length</i></td>	<td >return screen contents at cursor in <font size=-1>EBCDIC</font></td></tr>
<tr><td >Ebcdic <i>row</i> <i>col</i> <i>length</i></td>	<td >return screen contents in <font size=-1>EBCDIC</font></td></tr>
<tr><td >Ebcdic <i>row</i> <i>col</i> <i>rows</i> <i>cols</i></td>	<td >return screen region in <font size=-1>EBCDIC</font></td></tr>
<tr><td >EbcdicField</td>	<td >return current field in <font size=-1>EBCDIC</font></td></tr>
<tr><td >*Enter</td>	<td >Enter <font size=-1>AID</font> (or send <font size=-1>ASCII CR</font>)</td></tr>
<tr><td >Erase</td>	<td >erase previous character (or send <font size=-1>ASCII BS</font>)</td></tr>
<tr><td >EraseEOF</td>	<td >erase to end of current field</td></tr>
<tr><td >EraseInput</td>	<td >erase all input fields</td></tr>
<tr><td >FieldEnd</td>	<td >move cursor to end of field</td></tr>
<tr><td >FieldMark</td>	<td >mark field</td></tr>
<tr><td >HexString <i>hex_digits</i></td>	<td >insert control-character string</td></tr>
<tr><td >Home</td>	<td >move cursor to first input field</td></tr>
<tr><td >Insert</td>	<td >set insert mode</td></tr>
<tr><td >*Interrupt</td>	<td >send <font size=-1>TELNET IP</font> to host</td></tr>
<tr><td >Key <i>keysym</i></td>	<td >insert key <i>keysym</i></td></tr>
<tr><td >Key 0x<i>xx</i></td>	<td >insert key with <font size=-1>ASCII</font> code <i>xx</i></td></tr>
<tr><td >Left</td>	<td >move cursor left</td></tr>
<tr><td >Left2</td>	<td >move cursor left 2 positions</td></tr>
<tr><td >MonoCase</td>	<td >toggle uppercase-only mode</td></tr>
<tr><td >MoveCursor <i>row</i> <i>col</i></td>	<td >move cursor to (<i>row</i>,<i>col</i>)</td></tr>
<tr><td >Newline</td>	<td >move cursor to first field on next line (or send <font size=-1>ASCII LF</font>)</td></tr>
<tr><td >NextWord</td>	<td >move cursor to next word</td></tr>
<tr><td >*PA <i>n</i></td>	<td >Program Attention <font size=-1>AID</font> (<i>n</i> from 1 to 3)</td></tr>
<tr><td >*PF <i>n</i></td>	<td >Program Function <font size=-1>AID</font> (<i>n</i> from 1 to 24)</td></tr>
<tr><td >PreviousWord</td>	<td >move cursor to previous word</td></tr>
<tr><td >Quit</td>	<td >exit <b>tcl3270</b></td></tr>
<tr><td >Redraw</td>	<td >redraw window</td></tr>
<tr><td >Reset</td>	<td >reset locked keyboard</td></tr>
<tr><td >Right</td>	<td >move cursor right</td></tr>
<tr><td >Right2</td>	<td >move cursor right 2 positions</td></tr>
<tr><td >ReadBuffer Ascii</td>	<td >dump screen buffer in ASCII</td></tr>
<tr><td >ReadBuffer Ebcdic</td>	<td >dump screen buffer in EBCDIC</td></tr>
<tr><td >Rows</td>	<td >report screen size</td></tr>
<tr><td >Snap</td>	<td >same as <b>Snap Save</b></td></tr>
<tr><td >Snap Ascii</td>	<td >report saved screen data (see <b>Ascii</b>)</td></tr>
<tr><td >Snap Cols</td>	<td >report saved screen size</td></tr>
<tr><td >Snap Ebcdic</td>	<td >report saved screen data (see <b>Ebcdic</b>)</td></tr>
<tr><td >Snap ReadBuffer</td>	<td >report saved screen data (see <b>ReadBuffer</b>)</td></tr>
<tr><td >Snap Rows</td>	<td >report saved screen size</td></tr>
<tr><td >Snap Save</td>	<td >save screen image</td></tr>
<tr><td >Snap Status</td>	<td >report saved connection status</td></tr>
<tr><td >*Snap Wait [<i>timeout</i>] Output</td>	<td >wait for host output and save screen image</td></tr>
<tr><td >Status</td>	<td >report connection status</td></tr>
<tr><td >*String <i>string</i></td>	<td >insert string (simple macro facility)</td></tr>
<tr><td >*SysReq</td>	<td >System Request <font size=-1>AID</font></td></tr>
<tr><td >Tab</td>	<td >move cursor to next input field</td></tr>
<tr><td <i>set|clear</i>]>Toggle <i>option</i>[</td>	<td >toggle an option</td></tr>
<tr><td >ToggleInsert</td>	<td >toggle insert mode</td></tr>
<tr><td >ToggleReverse</td>	<td >toggle reverse-input mode</td></tr>
<tr><td >*Transfer <i>option</i>=<i>value</i>...</td>	<td >file transfer</td></tr>
<tr><td >Up</td>	<td >move cursor up</td></tr>
<tr><td >*Wait [<i>timeout</i>] 3270mode</td>	<td >wait for 3270 mode</td></tr>
<tr><td >*Wait [<i>timeout</i>] Disconnect</td>	<td >wait for host to disconnect</td></tr>
<tr><td >*Wait [<i>timeout</i>] InputField</td>	<td >wait for valid input field</td></tr>
<tr><td >*Wait [<i>timeout</i>] NVTMode</td>	<td >wait for NVT mode</td></tr>
<tr><td >*Wait [<i>timeout</i>] Output</td>	<td >wait for more host output</td></tr>
</table>
<a NAME="File-Transfer"></a><h2>File Transfer</h2>
The <b>Transfer</b> command implements <b>IND$FILE</b> file transfer.
This command requires that the <b>IND$FILE</b>
program be installed on the <font size=-1>IBM</font> host, and that the 3270 cursor
be located in a field that will accept a <font size=-1>TSO</font> or <font size=-1>VM/CMS</font> command.
<p>
<p>
Because of the complexity and number of options for file transfer, the
parameters to the <b>Transfer</b> command take the unique form
of <i>option</i>=<i>value</i>, and can appear in any order.
Note that if the <i>value</i> contains spaces (such as a VM/CMS file name),
then the entire parameter must be quoted, e.g., "HostFile=xxx foo a".
The options are:
<p>
<table BORDER cols=4 width="75%">
<tr><td >Option</td>	<td >Required?</td>	<td >Default</td>	<td >Other Values</td></tr>

<tr><td >Direction</td>	<td >No</td>	<td >send</td>	<td >receive</td></tr>
<tr><td >HostFile</td>	<td >Yes</td>	<td >&nbsp;</td>	<td >&nbsp;</td></tr>
<tr><td >LocalFile</td>	<td >Yes</td>	<td >&nbsp;</td>	<td >&nbsp;</td></tr>
<tr><td >Host</td>	<td >No</td>	<td >tso</td>	<td >vm</td></tr>
<tr><td >Mode</td>	<td >No</td>	<td >ascii</td>	<td >binary</td></tr>
<tr><td >Cr</td>	<td >No</td>	<td >remove</td>	<td >add, keep</td></tr>
<tr><td >Exist</td>	<td >No</td>	<td >keep</td>	<td >replace, append</td></tr>
<tr><td >Recfm</td>	<td >No</td>	<td >&nbsp;</td>	<td >fixed, variable, undefined</td></tr>
<tr><td >Lrecl</td>	<td >No</td>	<td >&nbsp;</td>	<td >&nbsp;</td></tr>
<tr><td >Blksize</td>	<td >No</td>	<td >&nbsp;</td>	<td >&nbsp;</td></tr>
<tr><td >Allocation</td>	<td >No</td>	<td >&nbsp;</td>	<td >tracks, cylinders, avblock</td></tr>
<tr><td >PrimarySpace</td>	<td >No</td>	<td >&nbsp;</td>	<td >&nbsp;</td></tr>
<tr><td >SecondarySpace</td>	<td >No</td>	<td >&nbsp;</td>	<td >&nbsp;</td></tr>
<tr><td >BufferSize</td>	<td >No</td>	<td >4096</td>	<td >&nbsp;</td></tr>
</table>
<p>
The option details are as follows.
<dl><dt><b>Direction</b></dt><dd>
<b>send</b> (the default) to send a file to the host,
<b>receive</b> to receive a file from the host.
<dt><b>HostFile</b></dt><dd>
The name of the file on the host.
<dt><b>LocalFile</b></dt><dd>
The name of the file on the local workstation.
<dt><b>Host</b></dt><dd>
The type of host (which dictates the form of the <b>IND$FILE</b> command):
<b>tso</b> (the default) or <b>vm</b>.
<dt><b>Mode</b></dt><dd>
Use <b>ascii</b> (the default) for a text file, which will be translated
between <font size=-1>EBCDIC</font> and <font size=-1>ASCII</font> as necessary.
Use <b>binary</b> for non-text files.
<dt><b>Cr</b></dt><dd>
Controls how <b>Newline</b> characters are handled when transferring
<b>Mode=ascii</b> files.
<b>remove</b> (the default) strips <b>Newline</b> characters in local files
before transferring them to the host.
<b>add</b> adds <b>Newline</b> characters to each host file record before
transferring it to the local workstation.
<b>keep</b> preserves <b>Newline</b> characters when transferring a local file
to the host.
<dt><b>Exist</b></dt><dd>
Controls what happens when the destination file already exists.
<b>keep</b> (the default) preserves the file, causing the
<b>Transfer</b> command to fail.
<b>replace</b> overwrites the destination file with the source file.
<b>append</b> appends the source file to the destination file.
<dt><b>Recfm</b></dt><dd>
Controls the record  of files created on the host.
<b>fixed</b> creates a file with fixed-length records.
<b>variable</b> creates a file with variable-length records.
<b>undefined</b> creates a file with undefined-length records (<font size=-1>TSO</font> hosts only).
The <b>Lrecl</b> option controls the record length or maximum record length for
<b>Recfm=fixed</b> and <b>Recfm=variable</b> files, respectively.
<dt><b>Lrecl</b></dt><dd>
Specifies the record length (or maximum record length) for files created on
the host.
<dt><b>Blksize</b></dt><dd>
Specifies the block size for files created on the host.  (<font size=-1>TSO</font> hosts only.)
<dt><b>Allocation</b></dt><dd>
Specifies the units for the <font size=-1>TSO</font> host <b>PrimarySpace</b> and
<b>SecondarySpace</b> options: <b>tracks</b>, <b>cylinders</b> or
<b>avblock</b>.
<dt><b>PrimarySpace</b></dt><dd>
Primary allocation for a file created on a <font size=-1>TSO</font> host.
The units are given by the <b>Allocation</b> option.
<dt><b>SecondarySpace</b></dt><dd>
Secondary allocation for a file created on a <font size=-1>TSO</font> host.
The units are given by the <b>Allocation</b> option.
<dt><b>BufferSize</b></dt><dd>
Buffer size for DFT-mode transfers.
Can range from 256 to 32768.
Larger values give better performance, but some hosts may not be able to
support them.
</dl>

<a NAME="Nested-Scripts"></a><h2>Nested Scripts</h2>
<dl><dt><b>The String Command</b></dt><dd>
The simplest method for
nested scripts is provided via the <b>String</b>
command.
The arguments to <b>String</b> are one or more double-quoted strings which are
inserted directly as if typed.
The C backslash conventions are honored as follows.
(Entries marked * mean that after sending the <font size=-1>AID</font> code to the host,
<b>tcl3270</b> will wait for the host to unlock the keyboard before further
processing the string.)
<table BORDER cols=2 width="75%">
<tr><td >\b</td>	<td >Left</td></tr>
<tr><td >\f</td>	<td >Clear*</td></tr>
<tr><td >\n</td>	<td >Enter*</td></tr>
<tr><td >\pa<i>n</i></td>	<td >PA(<i>n</i>)*</td></tr>
<tr><td >\pf<i>nn</i></td>	<td >PF(<i>nn</i>)*</td></tr>
<tr><td >\r</td>	<td >Newline</td></tr>
<tr><td >\t</td>	<td >Tab</td></tr>
<tr><td >\T</td>	<td >BackTab</td></tr>
</table>
<p>
<b>Note:</b>
The strings are in <font size=-1>ASCII</font> and converted to <font size=-1>EBCDIC</font>,
so beware of inserting
control codes.
<p>
There is also an alternate form of the <b>String</b> command, <b>HexString</b>,
which is used to enter non-printing data.
The argument to <b>HexString</b> is a string of hexadecimal digits, two per
character.  A leading 0x or 0X is optional.
In 3270 mode, the hexadecimal data represent <font size=-1>EBCDIC</font> characters, which
are entered into the current field.
In <font size=-1>NVT</font> mode, the hexadecimal data represent <font size=-1>ASCII</font> characters,
which are sent directly to the host.
</dl>

<a NAME="Passthru"></a><h2>Passthru</h2>
<b>tcl3270</b> supports the Sun <i>telnet-passthru</i>
service provided by the <i>in.telnet-gw</i> server.
This allows outbound telnet connections through a firewall machine.
When a <b>p:</b> is prepended to a hostname, <b>tcl3270</b>
acts much like the <i>itelnet</i>(1) command.
It contacts the machine named <b>internet-gateway</b> at the port defined in
<b>/etc/services</b> as <b>telnet-passthru</b>
(which defaults to 3514).
It then passes the requested hostname and port to the
<b>in.telnet-gw</b> server.
<a NAME="Proxy"></a><h2>Proxy</h2>
The <b>-proxy</b> option or the <b>tcl3270.proxy</b> resource
causes tcl3270 to use a proxy server to connect to the host.
The syntax of the option or resource is:
<blockquote><i>type</i>:<i>host</i>[:<i>port</i>]
</blockquote>
The supported values for <i>type</i> are:
<table BORDER cols=3 width="75%">
<tr><td ><center>Proxy Type</center></td>	<td ><center>Protocol</center></td>	<td ><center>Default Port</center></td></tr>

<tr><td ><center>http</center></td>	<td ><center>RFC 2817 HTTP tunnel (squid)</center></td>	<td ><center>3128</center></td></tr>
<tr><td ><center>passthru</center></td>	<td ><center>Sun in.telnet-gw</center></td>	<td ><center>none</center></td></tr>
<tr><td ><center>socks4</center></td>	<td ><center>SOCKS version 4</center></td>	<td ><center>1080</center></td></tr>
<tr><td ><center>socks5</center></td>	<td ><center>SOCKS version 5 (RFC 1928)</center></td>	<td ><center>1080</center></td></tr>
<tr><td ><center>telnet</center></td>	<td ><center>No protocol (just send <b>connect</b> <i>host port</i>)</center></td>	<td ><center>none</center></td></tr>
</table>
<p>
The special types <b>socks4a</b> and <b>socks5d</b> can also be used to force
the proxy server to do the hostname resolution for the SOCKS protocol.
snl Copyright 2000, 2001, 2002, 2007 by Paul Mattes.
<a NAME="Resources"></a><h2>Resources</h2>
Certain <b>tcl3270</b>
options can be configured via resources.
Resources are defined
by <b>-xrm</b> options.
The definitions are similar to X11 resources, and use a similar syntax.
The resources available in <b>tcl3270</b> are:
<p>
<table BORDER cols=4 width="75%">
<tr><td >Resource</td>	<td >Default</td>	<td >Option</td>	<td >Purpose</td></tr>

<tr><td >blankFill</td>	<td >False</td>	<td >-set blankFill</td>	<td >Blank Fill mode</td></tr>
<tr><td >charset</td>	<td >bracket</td>	<td >-charset</td>	<td ><font size=-1>EBCDIC</font> character set</td></tr>
<tr><td >charset.<i>foo</i></td>	<td >&nbsp;</td>	<td >&nbsp;</td>	<td >Definition of character set <i>foo</i></td></tr>
<tr><td >dsTrace</td>	<td >False</td>	<td >-trace</td>	<td >Data stream tracing</td></tr>
<tr><td >eof</td>	<td >^D</td>	<td >&nbsp;</td>	<td ><font size=-1>NVT</font>-mode <font size=-1>EOF</font> character</td></tr>
<tr><td >erase</td>	<td >^H</td>	<td >&nbsp;</td>	<td ><font size=-1>NVT</font>-mode erase character</td></tr>
<tr><td >extended</td>	<td >True</td>	<td >&nbsp;</td>	<td >Use 3270 extended data stream</td></tr>
<tr><td >eventTrace</td>	<td >False</td>	<td >-trace</td>	<td >Event tracing</td></tr>
<tr><td >ftCommand</td>	<td >ind$file</td>	<td >&nbsp;</td>	<td >Host file transfer command</td></tr>
<tr><td >icrnl</td>	<td >False</td>	<td >&nbsp;</td>	<td >Map <font size=-1>CR</font> to <font size=-1>NL</font> on <font size=-1>NVT</font>-mode input</td></tr>
<tr><td >inlcr</td>	<td >False</td>	<td >&nbsp;</td>	<td >Map <font size=-1>NL</font> to <font size=-1>CR</font> in <font size=-1>NVT</font>-mode input</td></tr>
<tr><td >intr</td>	<td >^C</td>	<td >&nbsp;</td>	<td ><font size=-1>NVT</font>-mode interrupt character</td></tr>
<tr><td >kill</td>	<td >^U</td>	<td >&nbsp;</td>	<td ><font size=-1>NVT</font>-mode kill character</td></tr>
<tr><td >lineWrap</td>	<td >False</td>	<td >-set lineWrap</td>	<td ><font size=-1>NVT</font> line wrap mode</td></tr>
<tr><td >lnext</td>	<td >^V</td>	<td >&nbsp;</td>	<td ><font size=-1>NVT</font>-mode lnext character</td></tr>
<tr><td >m3279</td>	<td ><a HREF="#rn1">(note 1)</a></td>	<td >-model</td>	<td >3279 (color) emulation</td></tr>
<tr><td >monoCase</td>	<td >False</td>	<td >-set monoCase</td>	<td >Mono-case mode</td></tr>
<tr><td >numericLock</td>	<td >False</td>	<td >&nbsp;</td>	<td >Lock keyboard for numeric field error</td></tr>
<tr><td >oerrLock</td>	<td >False</td>	<td >&nbsp;</td>	<td >Lock keyboard for input error</td></tr>
<tr><td >oversize</td>	<td >&nbsp;</td>	<td >-oversize</td>	<td >Oversize screen dimensions</td></tr>
<tr><td >port</td>	<td >telnet</td>	<td >-port</td>	<td >Non-default TCP port</td></tr>
<tr><td >quit</td>	<td >^\</td>	<td >&nbsp;</td>	<td ><font size=-1>NVT</font>-mode quit character</td></tr>
<tr><td >rprnt</td>	<td >^R</td>	<td >&nbsp;</td>	<td ><font size=-1>NVT</font>-mode reprint character</td></tr>
<tr><td >secure</td>	<td >False</td>	<td >&nbsp;</td>	<td >Disable "dangerous" options</td></tr>
<tr><td >termName</td>	<td ><a HREF="#rn2">(note 2)</a></td>	<td >-tn</td>	<td ><font size=-1>TELNET</font> terminal type string</td></tr>
<tr><td >traceDir</td>	<td >/tmp</td>	<td >&nbsp;</td>	<td >Directory for trace files</td></tr>
<tr><td >traceFile</td>	<td ><a HREF="#rn3">(note 3)</a></td>	<td >-tracefile</td>	<td >File for trace output</td></tr>
<tr><td >werase</td>	<td >^W</td>	<td >&nbsp;</td>	<td ><font size=-1>NVT</font>-mode word-erase character</td></tr>
</table>
<p>
<blockquote><a NAME="rn1"></a><i>Note 1</i>: <b>m3279</b> defaults to
<b>False</b>.
It can be forced to <b>True</b> with the proper <b>-model</b>
option.
<p>
<a NAME="rn2"></a><i>Note 2</i>:
The default terminal type string is constructed from the model number, color
emulation, and extended data stream modes.
E.g., a model 2 with color emulation and the extended data stream option
would be sent as <b>IBM-3279-2-E</b>.
Note also that when <font size=-1>TN3270E</font>
mode is used, the terminal type is always sent as 3278, but this does not
affect color capabilities.
<p>
<a NAME="rn3"></a><i>Note 3</i>: The default trace file is
<b>x3trc.</b><i>pid</i> in the directory specified by
the <b>traceDir</b> resource.



</blockquote><p>
If more than one <b>-xrm</b> option is given for the same resource,
the last one on the command line is used.
<a NAME="See-Also"></a><h2>See Also</h2>

<a HREF="x3270-man.html">x3270(1)</a>, <a HREF="s3270-man.html">s3270(1)</a>, <a HREF="c3270-man.html">c3270(1)</a>, telnet(1), tn3270(1)
<br>
Data Stream Programmer's Reference, IBM GA23-0059
<br>
Character Set Reference, IBM GA27-3831
<br>
RFC 1576, TN3270 Current Practices
<br>
RFC 1646, TN3270 Extensions for LUname and Printer Selection
<br>
RFC 2355, TN3270 Enhancements
<a NAME="Copyrights"></a><h2>Copyrights</h2>
<p>
Modifications and original code Copyright &copy; 1993, 1994, 1995, 1996, 1997, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007 by Paul Mattes.
<br>
DFT File Transfer Code Copyright  &copy; October 1995 by Dick Altenbern.
<br>
RPQNAMES Code Copyright  &copy; 2004, 2005 by Don Russell.
<br>
Original X11 Port Copyright &copy; 1990 by Jeff Sparkes.
<blockquote>Permission to use, copy, modify, and distribute this software and its
documentation for any purpose and without fee is hereby granted,
provided that the above copyright notice appear in all copies and that
both that copyright notice and this permission notice appear in
supporting documentation.</blockquote>
Copyright &copy; 1989 by Georgia Tech Research Corporation, Atlanta, GA 30332.
<blockquote>All Rights Reserved.  GTRC hereby grants public use of this software.
Derivative works based on this software must incorporate this copyright
notice.</blockquote>
<br>
tcl3270 is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the file LICENSE for more details.
<a NAME="Version"></a><h2>Version</h2>
tcl3270 3.3.7
<hr>
<i>
This HTML document and the accompanying troff document were generated with
a set of write-only <b>m4</b> macros and the powerful <b>vi</b> editor.
<br>Last modified 24 December 2007.
</i>
</body>
</html>

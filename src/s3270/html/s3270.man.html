<HTML>
<TITLE>s3270 - scripted IBM host access tool</TITLE>
<H1><IMG SRC="x3270.xbm" ALIGN=MIDDLE>  s3270 - scripted IBM host access tool</H1>
<H2>SYNOPSIS</H2>
<B>s3270</B> [<I>options</I>] [[<I>prefix</I><B>:</B>]...[<I>LUname</I><B>@</B>]<I>hostname</I>[<B>:</B><I>port</I>]]
<BR>
<H2>DESCRIPTION</H2>
<B>s3270</B> opens a telnet connection to an IBM host, then allows a script
to run the host login session.
It is derived from <I>x3270</I>, an X-windows IBM 3270 terminal emulator.
<P>Prepending a <B>p:</B> onto <I>hostname</I> causes the connection to go
through the <I>telnet-passthru</I> service rather than directly to the host.
See <A HREF="#PASSTHRU">PASSTHRU</A> below.
<P>
Prepending an <B>s:</B> onto <I>hostname</I> removes the "extended
data stream" option reported to the host.
See <A HREF="#-tn"><B>-tn</B></A> for further information.
<P>
A specific LU name to use may be specified by prepending it to the
<I>hostname</I> with an <B>@</B>.
<P>
The port to connect to defaults to <B>telnet</B>.
This can be overridden with the <A HREF="#-port"><B>-port</B></A> option, or
by appending a <I>port</I> to the <I>hostname</I> with a colon <B>:</B>.
(For compatability with previous versions of <I>x3270</I> and with
<I>tn3270</I>, the <I>port</I> may also be specified as a second, separate
argument.)
<H2>OPTIONS</H2>
<B>s3270</B> understands the following options:
<DL>
<DT><B>-apl</B>
<DD>Sets up APL mode.
This is actually an abbreviation for several options.
See <A HREF="#APL SUPPORT">APL SUPPORT</A>.
<DT><B>-charset</B> <I>name</I>
<DD>Specifies an EBCDIC national character set.
See <A HREF="#CHARACTER SETS">CHARACTER SETS</A>.
<DT><B>-clear</B> <I>toggle</I>
<DD>Sets the initial value of <I>toggle</I> to <B>false</B>.
The list of <A HREF="#toggle names">toggle names</A> is under
<A HREF="#TOGGLES">TOGGLES</A> below.
<DT><B>-model</B> <I>name</I>
<DD>The model of 3270 display to be emulated.
The model name is in three parts, any of which may be omitted:
<P>
The first part is the <B>base model</B>, which is either <B>3278</B>
or <B>3279</B>. <B>3278</B> specifies a monochrome 3270 display;
<B>3279</B> specifies a color 3270 display.
<P>The second part is the <B>model number</B>, which specifies the
number of rows and columns.
Model 4 is the default.
<PRE>
    Model Number  Columns   Rows
    ----------------------------
          2         80       24
          3         80       30
          4         80       43
          5         132      27
</PRE>
<B>Note</B>: Technically, there is no such 3270 display as a 3279-4
or 3279-5, but most hosts seem to work with them anyway.
<P>The third part specifies the Extended 3270 Data Stream, and is
given as <B>-E</B>.
It signals the host that the 3270 display is capable of displaying
extended field attributes, and supports structured fields and query replies.
A 3279 always uses the Extended Data Stream (whether or not <B>-E</B>
is specified); for a 3278 it is optional.
<P>The default model is <B>3279-4-E</B>.
<DT><B>-oversize</B> <I>cols</I><B>x</B><I>rows</I>
<DD>Makes the screen larger than the default for the chosen model number.
This option has effect only in combination with extended data stream support
(the <B>-E</B> suffix on the model),
and only if the host supports the Query Reply structured field.
The number of columns multiplied by the number of rows must not exceed
16383 (3fff hex), the limit of 14-bit 3270 buffer addressing.
<DT><A NAME="-port"><B>-port</B></A> <I>n</I>
<DD>Specifies a different TCP port to connect to.
<I>n</I> can be a name from <B>/etc/services</B> like <B>telnet</B>,
or a number.
This option changes the default port number used for all connections.
(The positional parameter affects only the initial connection.)
<DT><B>-set</B> <I>toggle</I>
<DD>Sets the initial value of <I>toggle</I> to <B>true.</B>
The list of <A HREF="#toggle names">toggle names</A> is under
<A HREF="#TOGGLES">TOGGLES</A> below.
<DT><A NAME="-tn"><B>-tn</B></A> <I>name</B>
<DD>Specifies the terminal name to be transmitted over the telnet connection.
The default name is <B>IBM-</B><I>model_name</I>, for example,
<B>IBM-3279-4-E</B>.
<P>
Some hosts are confused by the <B>-E</B> suffix on the terminal name, and will
ignore the extra screen area on models 3, 4 and 5.
Prepending an <B>:s</B> on the hostname removes the <B>-E</B> from the
terminal name when connecting to such hosts.
</DL>
<H2><A NAME="CHARACTER SETS">CHARACTER SETS</A></H2>
The <B>-charset</B> option controls the
EBCDIC national character set used by <B>s3270.</B>
Available sets include:
<PRE>
    Charset Name    Q121 Code
    -------------------------
       bracket          -
       us-intl          01
       german           03
       finnish          09
       uk               22
       norwegian        23
       french           30
       hebrew           -
       icelandic        -
       belgian          -
</PRE>
The default character set is <B>bracket</B>, which useful for common
IBM hosts which use EBCDIC
codes 0xAD and 0xBD for the `[' and `]' characters, respectively.
<H2>ANSI MODE</H2>
Some hosts use an ASCII
front-end to do initial login negotiation, then later switch to 3270 mode.
<B>s3270</B> will emulate an ANSI X.64 terminal until the host places it in
3270 mode (telnet BINARY and SEND EOR modes).
This allows <B>s3270</B> to be used to script standard TELNET sessions as well.
<P>
If the host later negotiates to stop functioning in 3270 mode, <B>s3270</B>
will return to ANSI emulation.
<P>
When emulating an ANSI terminal, <B>s3270</B>
supports both character-at-a-time mode and line mode operation.
When in line mode, the special characters and operational characteristics are
defined as follows:
<PRE>
    Mode/Character            Setting
    ---------------------------------
    Translate CR to NL        true
    Translate NL to CR        false
    Erase previous character  ^?
    Erase entire line         ^U
    Erase previous word       ^W
    Redisplay line            ^R
    Ignore special meaning of
     next character           ^V
    Interrupt                 ^C
    Quit                      ^\
    End of file               ^D
</PRE>
<H2><A NAME="TOGGLES">TOGGLES</A></H2>
<B>s3270</B> has a number of configurable modes which may be selected by
the <B>-set</B> and <B>-clear</B> options.
<DL>
<DT><B>Monocase</B>
<DD>If set, <B>s3270</B> operates in uppercase-only mode.
<DT><B>Blank Fill</B>
<DD>If set, <B>s3270</B> behaves in some un-3270-like ways.
First, when a character is typed into a field, all nulls in the field to the
left of that character are changed to blanks.
This eliminates a common 3270 data-entry surprise.
Second, in insert mode, trailing blanks in a field are treated like nulls,
eliminating the annoying "lock-up" that often occurs when inserting into an
field with (apparent) space at the end.
<DT><B>Wraparound</B>
<DD>If set, the ANSI terminal emulator automatically assumes a NEWLINE
character when it reaches the end of a line.
</DL>
The <A NAME="toggle names">names of the toggles</A> for use with the <B>-set</B> and <B>-clear</B>
options are as follows:
<PRE>
    Menu Option              Name
    ------------------------------------
    Monocase                 monoCase
    Blank Fill               blankFill
    Wraparound               lineWrap
</PRE>
<H2><A NAME="ACTIONS">ACTIONS</A></H2>
<B>s3270</B> supports the following basic actions:
<PRE>
    Attn                   attention key
    BackSpace              move cursor left (or send ASCII BS)
    BackTab                tab to start of previous input field
    CircumNot              input <B>^</B> in ANSI mode, or <B>&#172;</B> in 3270 mode
    Clear                  clear screen
    CursorSelect           Cursor Select AID
    Cut                    erase selected text
    Delete                 delete character under cursor (or send ASCII DEL)
    DeleteField            delete the entire field
    DeleteWord             delete the current or previous word
    Down                   move cursor down
    Dup                    duplicate field
    Enter                  Enter AID (or send ASCII CR)
    Erase                  erase previous character (or send ASCII BS)
    EraseEOF               erase to end of current field
    EraseInput             erase all input fields
    Execute(<I>cmd</I>)           execute a command in a shell
    FieldEnd               move cursor to end of field
    FieldExit              clear to end of field and skip to next (5250 emulation)
    FieldMark              mark field
    HexString(<I>hex_digits</I>)  insert control-character string
    Home                   move cursor to first input field
    Insert                 set insert mode
    Key(<I>keysym</I>)            insert key <I>keysym</I>
    Left                   move cursor left
    Left2                  move cursor left 2 positions
    MonoCase               toggle uppercase-only mode
    Newline                move cursor to first field on next line (or send ASCII LF)
    NextWord               move cursor to next word
    PA(<I>n</I>)                  Program Attention AID (<I>n</I> from 1 to 3)
    PF(<I>n</I>)                  Program Function AID (<I>n</I> from 1 to 24)
    PreviousWord           move cursor to previous word
    Quit                   exit <B>s3270</B>
    Reset                  reset locked keyboard
    Right                  move cursor right
    Right2                 move cursor right 2 positions
    Script(<I>command</I>[,<I>arg</I>...])  run a script

    String(<I>string</I>)         insert string (simple macro facility)
    SysReq                 System Request AID
    Tab                    move cursor to next input field
    ToggleInsert           toggle insert mode
    Up                     move cursor up
</PRE>
<H2>SCRIPTS</H2>
There are several types of scripting functions available.
<DL>
<DT><B>The String() Action</B>
<DD>The simplest method for macros is provided via the String action, which can
be bound to any key in a keymap.
The arguments to String() are one or more double-quoted strings which are
inserted directly as if typed.
The C backslash conventions are honored as follows.
(Entries marked * mean that after sending the AID code to the host,
<B>s3270</B> will wait for the host to unlock the keyboard before further
processing the string.)
<PRE>
    \b     Left
    \f     Clear
    \n     Enter
    \pa<I>n</I>   PA key <I>n</I>
    \pf<I>nn</I>  PF key <I>nn</I>
    \r     Newline
    \t     Tab
</PRE>
An example action would be:
<PRE>
    Meta&lt;Key&gt;p: String("probs clearrdr\en")
</PRE>
<B>Note:</B> The strings are in ASCII and converted to EBCDIC,
so beware of inserting control codes.
Also, a backslash before a <B>p</B>
must be doubled so it will not be removed when resource files are read.
<P>There is also an alternate form of the String action, HexString, which is
used to enter non-printing data.
The argument to HexString is a string of hexadecimal digits, two per
character.  A leading <B>0x</B> or <B>0X</B> is optional.
In 3270 mode, the hexadecimal data represent EBCDIC characters, which are
entered into the current field.
In ANSI mode, the hexadecimal data represent ASCII characters, which are sent
directly to the host.
<DT><B>The Script() Action</B>
<DD>This facility causes <B>s3270</B> to start a child process which can execute
<B>s3270</B> actions.
The child process' standard input and output are piped back to <B>s3270</B>.
The <B>Script()</B> action is fully documented in
<A HREF="x3270-script.html"><I>x3270-script</I>(1)</A>.
</DL>
<H2><A NAME="APL SUPPORT">APL SUPPORT</A></H2>
<B>s3270</B> supports the full APL2 character set and the entry of APL
characters with the Key() action.
<P>
The complete list of special APL keysyms is as follows.
Entries marked with an asterisk (*) represent
simple aliases for standard EBCDIC characters.
<PRE>
 APL Symbol         Hex  s3270 Keysym
 ------------------ ---- -------------------- 
 A underbar         41   apl_Aunderbar
 alpha              B0   apl_alpha
 B underbar         42   apl_Bunderbar
 bar                60*  apl_bar
 C underbar         43   apl_Cunderbar        
 circle             9D   apl_circle          
 circle bar         ED   apl_circlebar      
 circle slope       CF   apl_circleslope   
 circle star        FD   apl_circlestar   
 circle stile       CD   apl_circlestile 
 colon              7A*  apl_colon      
 comma              6B*  apl_comma     
 D underbar         44   apl_Dunderbar
 del                BA   apl_del     
 del stile          DC   apl_delstile                  
 del tilde          FB   apl_deltilde                 
 delta              BB   apl_delta           
 delta stile        DD   apl_deltastile     
 delta underbar     FC   apl_deltaunderbar 
 diamond            70   apl_diamond      
 dieresis           72   apl_dieresis    
 dieresis dot       EC   apl_dieresisdot
 divide             B8   apl_divide    
 dot                4B*  apl_dot             
 down arrow         8B   apl_downarrow      
 down caret         78   apl_downcaret     
 down caret tilde   CB   apl_downcarettilde
 down shoe          AB   apl_downshoe     
 down stile         8E   apl_downstile   
 down tack          AC   apl_downtack   
 down tack jot      FE   apl_downtackjot   
 down tack up tack  DA   apl_downtackuptack
 E underbar         45   apl_Eunderbar    
 epsilon            B1   apl_epsilon         
 epsilon underbar   75   apl_epsilonunderbar
 equal              7E*  apl_equal         
 equal underbar     E1   apl_equalunderbar
 F underbar         46   apl_Funderbar   
 G underbar         47   apl_Gunderbar  
 greater            6E*  apl_greater   
 H underbar         48   apl_Hunderbar       
 I underbar         49   apl_Iunderbar      
 iota               B2   apl_iota          
 iota underbar      74   apl_iotaunderbar 
 J underbar         51   apl_Junderbar   
 jot                AF   apl_jot        
 K underbar         52   apl_Kunderbar 
 L underbar         53   apl_Lunderbar
 left arrow         9F   apl_leftarrow        
 left bracket       AD   apl_leftbracket     
 left paren         4D*  apl_leftparen      
 left shoe          9B   apl_leftshoe      
 less               4C*  apl_less         
 M underbar         54   apl_Munderbar        
 N underbar         55   apl_Nunderbar       
 not equal          BE   apl_notequal       
 not greater        8C   apl_notgreater    
 not less           AE   apl_notless      
 O underbar         56   apl_Ounderbar   
 omega              B4   apl_omega      
 overbar            A0   apl_overbar   
 P underbar         57   apl_Punderbar
 plus               4E*  apl_plus    
 Q underbar         58   apl_Qunderbar        
 quad               90   apl_quad            
 quad divide        EE   apl_quaddivide     
 quad jot           73   apl_quadjot       
 quad quote         DE   apl_quadquote    
 quad slope         CE   apl_quadslope   
 query              6F*  apl_query      
 quote              7D*  apl_quote     
 quote dot          DB   apl_quotedot 
 R underbar         59   apl_Runderbar        
 rho                B3   apl_rho             
 right arrow        8F   apl_rightarrow     
 right bracket      BD   apl_rightbracket  
 right paren        5D*  apl_rightparen   
 right shoe         9A   apl_rightshoe   
 S underbar         62   apl_Sunderbar  
 semicolon          5E*  apl_semicolon 
 slash              61*  apl_slash    
 slash bar          EA   apl_slashbar        
 slope              B7   apl_slope          
 slope bar          EB   apl_slopebar      
 squad              CC   apl_squad        
 star               5C*  apl_star        
 stile              BF   apl_stile      
 T underbar         63   apl_Tunderbar 
 tilde              80   apl_tilde    
 times              B6   apl_times   
 U underbar         64   apl_Uunderbar       
 underbar           6D*  apl_underbar       
 up arrow           8A   apl_uparrow       
 up caret           71   apl_upcaret      
 up caret tilde     CA   apl_upcarettilde
 up shoe            AA   apl_upshoe     
 up shoe jot        DF   apl_upshoejot 
 up stile           8D   apl_upstile  
 up tack            BC   apl_uptack  
 up tack jot        EF   apl_uptackjot                 
 V underbar         65   apl_Vunderbar       
 W underbar         66   apl_Wunderbar      
 X underbar         67   apl_Xunderbar     
 Y underbar         68   apl_Yunderbar    
 Z underbar         69   apl_Zunderbar   
</PRE>
<H2><A NAME="PASSTHRU">PASSTHRU</A></H2>
<B>s3270</B> supports the Sun <I>telnet-passthru</I> service provided by the
<I>in.telnet-gw</I> server.
This allows outbound telnet connections through a firewall machine.
When a <B>p:</B> is prepended to a hostname, <B>s3270</B> acts much like the
<I>itelnet</I>(1) command.
It contacts the machine named <B>internet-gateway</B> at the port defined in
<B>/etc/services</B> as <B>telnet-passthru</B> (which defaults to 3514).
It then passes the requested hostname and port to the <B>in.telnet-gw</B>
server.
<H2>BUGS</H2>
<H2>SEE ALSO</H2>
<I>telnet</I>(1)<BR>
<I>x3270</I>(1)<BR>
<A HREF="x3270-script.html"><I>x3270-script</I>(1)</A><BR>
<CITE>Data Stream Programmer's Reference, IBM GA23-0059</CITE>
<BR>
<CITE>Character Set Reference, IBM GA27-3831</CITE>
<BR>
<CITE>RFC 1576, TN3270 Current Practices</CITE>
<BR>
<CITE>RFC 1646, TN3270 Extensions for LUname and Printer Selection</CITE>
<H2> COPYRIGHTS</H2>
Modifications Copyright &#169; 1993, 1994, 1995, 1996, 1997, 1999, 2000 by Paul Mattes.
<BR>
Original X11 Port Copyright &#169; 1990 by Jeff Sparkes.
<BR>
Permission to use, copy, modify, and distribute this software and its
documentation for any purpose and without fee is hereby granted,
provided that the above copyright notice appear in all copies and that
both that copyright notice and this permission notice appear in
supporting documentation.
<P>
Copyright &#169; 1989 by Georgia Tech Research Corporation, Atlanta, GA 30332.
<BR>
All Rights Reserved.  GTRC hereby grants public use of this software.
Derivative works based on this software must incorporate this copyright
notice.
<P>
5250 Emulation Code Copyright &#169; Minolta (Schweiz) AG, Beat Rubischon.
<HR>
<ADDRESS>
s3270 version 3.2.4, last modified 8. May 2000
</ADDRESS>

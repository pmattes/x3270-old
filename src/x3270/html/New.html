<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Paul Mattes">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (WinNT; U) [Netscape]">
   <title>x3270 3.2 New Features</title>
   <link HREF="http://www.w3.org/StyleSheets/Core/Steely" TYPE="text/css" REL="stylesheet">
</head>
<body>

<h1>
New Features in x3270 3.2
<hr WIDTH="100%"></h1>
x3270 3.2 is a reorganization of x3270 3.1, with some significant enhancements.
It is intended to be the future development platform for x3270, with x3270
3.1 continued only with bug fixes.
<h2>Changes in x3270 3.2.17, 22. June 2001</h2>
<ul>
 <li>Installation Changes:
  <ul>
   <li>Moved the feature disable logic (turning off NVT mode, file transfers,
     etc.) to <tt>configure --disable</tt> options.</li>
   <li>Files shared with other non-X11 3270 applications (the <tt>ibm_hosts</tt>
    file, <i>pr3287</i> and <i>x3270if</i>) are now installed in under the
    autoconf "prefix" directory (which defaults to <tt>/usr/local</tt>),
    rather than under the system's X11 directory.  The previous behavior
    can be restored with <tt>configure --with-all-xinstall</tt>.
    Conversely, <i>all</i> files can be installed under the autoconf "prefix"
    directory with the command <tt>make install.byprefix</tt>.
    <b>[Incompatible change]</b>
   <li>Allowed the location of the configuration directory (where the
    <tt>ibm_hosts</tt> and character set files are) to be set with a new
     resource: <tt>x3270.confDir</tt>.</li>
   <li>Removed the <tt>xmkmf</tt> step from the build procedure.</li>
   <li>Added consistent DESTDIR support.</li>
  </ul>
 </li>
 <li>Bug Fixes:
  <ul>
   <li>Verified that x3270 builds with all permutations of disabled
    features.</li>
   <li>Fixed a problem with 3270 Modify Field orders that specify no
    attributes.</li>
   <li>Fixed a typo in the base keymap definition, which disabled the last
    three key mappings.</li>
   <li>Fixed a problem with misinterpreting skipped 3270 field attributes.</li>
   <li>Removed the redundant <i>localhost</i> entry from the default
    <tt>ibm_hosts</tt> file.
    Changed the rules for accessing <tt>ibm_hosts</tt> -- now it is accessed
    only when the supplied hostname has no qualifiers.</li>
   <li>Compatibility changes for Cygwin.</li>
   <li>Fixed the behavior of the <tt>-xrm</tt> option when there is a conflict
    with the <tt>.x3270pro</tt> file.  The command-line options were supposed to
    be the final definitions; now they are.</li>
   <li>Improved the performance of DFT file transfers.</li>
   <li>Prevented <b>Display Current Keymap</b> from popping up twice.</li>
   <li>Corrected the selection of NULL characters -- they are now treated as
    spaces, except at the ends of lines and at the end of the selection area.
    </li>
  </ul>
 </li>
 <li>Character Set Improvements:
  <ul>
   <li>Added support for other 8-bit character sets (Latin-5, etc.), using
  standard X fonts.  Strengthened the rules for the character sets implemented
  by the emulator font.</li>
   <li>Added support for Turkish, ISO Hebrew, Russian, Thai and Brazilian
    character sets.</li>
   <li>Added support for file-based character sets, in the <tt>charset</tt>
    subdirectory of the configuration directory.</li>
   <li>Added support for specifying an entire character set translation table,
    rather than listing the exceptions from ISO 8859-1.</li>
   <li>Added support for file transfer character sets (a definition of how
    the host translates EBCDIC to ASCII for file transfers).</li>
  </ul>
 </li>
 <li>Other Improvements:
  <ul>
   <li>Added support for <b>BackTab</b> in <b>String</b> actions, via the
    <tt>\T</tt> sequence.</li>
   <li>Added support for 3270-mode keymaps (like NVT-mode keymaps).  Changed
    the <b>base</b> and <b>alt</b> keymaps to have default and 3270-only
    components.  Changed the interpretation of NVT-mode keymaps so they
    augment the default, rather than replacing it.
    <b>[Incompatible Change]</b></li>
   <li>Allow IPv6-style square-bracket-delimited hostnames, and tightened the
    rules for port numbers.</li>
   <li>Nearly all error messages and output from scripts is now captured in
    pop-ups. The only exceptions are fatal errors which prevent x3270 from
    creating its windows.</li>
  </ul>
 </li>
</ul>
<h2>Changes in x3270 3.2.16, 28. February 2001</h2>
<ul>
 <li>Added a timeout parameter to the scripting <b>Wait</b> action.</li>
 <li>Added <b>Snap(Wait Output)</b>.</li>
 <li>Fixed the MAKEFLAGS/MFLAGS problems in the Imakefile template.</li>
 <li>Added a <tt>--without-pr3287</tt> option to the configure script, to
  avoid building pr3287.</li>
 <li>Added a <tt>--with-fontdir=<i>xxx</i></tt> option to the configure
  script, to specify a different font installation directory.</li>
 <li>Resolved some build problems on HP/UX.</li>
 <li>Added an Italian character set.</li>
 <li>Corrected the behavior of the <b>start-extend</b> action (usually bound
  to <b>Btn3Down</b>) when doing rectangular selections.</li>
 <li>Added <b>KybdSelect</b> and <b>Unselect</b> actions to allow the keyboard
  to be used to control selections. <b>KybdSelect</b> is mapped to the Shifted
  cursor keys.</li>
 <li>Removed the mapping of the "<b>^</b> key to "<b>&not;</b>" in 3270 mode,
  replacing it with an unconditional mapping of Meta-"<b>^</b>" to
  "<b>&not;</b>".</li>
 <li>Replaced the <b>MoveCursorSelect</b> action with the <b>MouseSelect</b>
  action, and corrected the behavior of pen selections in general.</li>
 <li>Corrected the mapping of the mouse cursor location to character cells
  when processing selections, select-pen emulation, and cursor movement.</li>
 <li>Stopped locking the keyboard for invalid select-pen operations.</li>
 <li>Changed the default visualSelect color to 6 (yellow).</li>
 <li>Save the emulator font in response to a WM_SAVE_YOURSELF message.</li>
 <li>Fixed a kybd.c build problem on X11R5.</li>
 <li>Added translations ASCII file transfers, so square brackets, pipe
  characters and anything from the upper half of the IOS 8859-1 character set
  stand a better chance of coming through correctly.</li>
 <li>Corrected a subtle problem in TN3270E option negotiation.</li>
 <li>Improved SSCP-LU support.</li>
 <li>Restored the operation of CUT-mode file transfer. (It had been disabled
  early in the 3.2 development cycle.)</li>
</ul>
<h2>Changes in x3270 3.2.15, 26. December 2000</h2>
<ul>
<li>Improved documentation formatting.</li>
<li>Fixed a problem with <tt>user</tt> keymaps being ignored.</li>
<li>Fixed a problem with disconnecting from hosts when they send illegal
commands in non-TN3270E mode.</li>
<li>Allow, but ignore, Create Partition structured fields.</li>
</ul>
<h2>
Changes in x3270 3.2.14, 15. November 2000</h2>
Use GNU autoconf now.
<br>Fixed a crash when <b>-reconnect</b> is used and <b>x3270.menuBar</b> is
<b>False</b>.
<br>Added documentation on how to get square brackets to display properly.
<br>Added recent-connect list and connectFileName resource to control it.
<br>Put accidental command output into a pop-up window.
<br>Updated the man pages and synchronized the HTML versions.
<br>Added NVT-mode keymaps via <b>x3270.keymap.</b><i>name</i><b>.nvt</b>.
<br>Fixed a memory corruption problem associated with printer session termination.
<br>Improved the behavior of the <b>-reconnect</b> option, when a host connection fails.
<br>Allow separate app-defaults file to be built again, via <tt>configure --enable-app-defaults</tt>.
<h2>
Changes in x3270 3.2.13, 24. September 2000</h2>
Integrated <b>pr3287</b> into the x3270 release.
<br>Rewrote the screen resizing logic.  It now functions correctly on window
managers like <i>icewm</i> and under KDE, and would rather leave the screen the
wrong size than exit.
<br>Changed the <b>greenScreen</b> color scheme to be really green.
<br>Fixed the display of red text when the <b>highlightBold</b> option is set.
<br>Fixed the block cursor display when the <b>-mono</b> option is used on a
color display.
<h2>
Changes in x3270 3.2.12, 7. September 2000</h2>
Fixed a problem with exiting whenever the window was resized.
<br>Added a complete interface library for use with <i>expect</i>,
<tt>x3270_glue.expect</tt>.
<br>Fixed problems with selecting blanks and NULLs on the screen -- real
blanks at the end of a line are now included in the selection, and NULLs
are not.
<br>Allow <tt>none</tt> to be specified as a trace file name, causing a
pipe to be used instead.
<br>In secure mode, use pipe-based data stream and event tracing, and disallow
screen tracing.
<br>Added a <i>No File</i> button to the data stream and event tracing
dialog.
<br>Added <b>traceFile</b> and <b>screenTraceFile</b> resources, and a
<b>-tracefile</b>
option, to specify file names for tracing.
<br>Corrected the documentation of the script prompt status fields (there
are only 11 of them).
<br>Added CMS logon example scripts, <tt>Examples/cms_login.bash</tt> and
<tt>Examples/cms_logon.sh</tt>.
<br>Added a tutorial for creating custom keymaps, <tt>html/Keymap.html</tt>.
<br>Added support for 3287 printer sessions via new menu options and a
new <b>Printer()</b> action.
<br>Set <b>x3270.disconnectClear</b> to <b>True</b> when <b>x3270.secure</b>
is <b>True</b>.
<br>Fixed several problems when windows do not fit on the screen.
<h2>
Changes in x3270 3.2.11, 31. July 2000</h2>
Expanded the <b>Default()</b> action to better diagnose keymap problems.
<br>Added default support for X11 <tt>XK_3270_<i>xxx</i></tt> and APL keysyms.
<br>Fixed a core dump when the emulator font can't be found.
<br>Improved <i>Trace Keyboard/Mouse Events</i> display, to make it more
directly applicable to creating keymaps.
<br>Removed many compiler warnings generated when additional gcc warnings
are enabled.
<br>Changed the trace window kill signal to SIGKILL. SIGTERM didn't always
do the job.
<br>Send the correct codepage in Query Reply when using non-US character
sets.
<br>Send information about a second character set only if we have one.
<br>Request the first LU name only once.
<br>Added a <tt>highlightBold</tt> resource to display highlighted fields
in bold.
<br>Fixed a core dump from editing the <i>Print Window Bitmap</i> command.
<h2>
Changes in x3270 3.2.10, 5. July 2000</h2>
Added an <b>n:</b> prefix to hostnames to selectively disable TN3270E.
<br>Changed the reported CSCSGID to <tt>X'02B90025'</tt> (English-U.S.).
<br>Fixed the <b>Attn()</b> action to send TELNET IP, per RFC 2355.
<br>Removed the explicit <tt>$(BINDIR)</tt> from the <tt>Imakefile</tt>;
it bothered XFree86 4.0.
<br>Announce which font we're using when we can't find the one the user
asked for.
<br>Fixed the problem of ignoring keyboard input when the window manager
uses a click-to-focus policy and the mouse cursor is outside the x3270
window.
<br>When processing <tt>WM_SAVE_YOURSELF</tt> ICCM messages, save toggles
before saving the hostname.
<br>Added a new <b>MoveCursorSelect()</b> action, to emulate light pen
selection with the mouse. The default mapping is <tt>Ctrl Shift &lt;Btn1Down></tt>.
<br>Added a <b>highlightSelect</b> resource (default <b>True</b>) to control
whether highlighted fields are selectable via the <b>CursorSelect()</b>
and <b>MoveCursorSelect()</b>.
<br>Added <b>visualSelect</b> and <b>visualSelectColor</b> resources to
optionally display light pen selectable fields in a different color.
<br>Allow spaces in font names.
<br>Removed <tt>XtSpecificationRelease</tt> dependencies.
<br>Added AIX "<tt>@@for</tt>" problem workaround to the build instructions.
<br>Restored the ability to disable most components in <tt>parts.h</tt>,
and made TN3270E mode a configurable component.
<br>Removed old <tt>ARGSUSED</tt> lint hints.
<h2>
Changes in x3270 3.2.9, 26. June 2000</h2>
Fixed requesting the wrong LU after switching between TN3270E and TN3270
modes.
<br>Changed the resource file format back to using "x3270" as a consistent
prefix. Changed <b>x3270.fontList</b> to <b>x3270.fontMenuList</b> to avoid
conflicts.
<br>Fixed a typo in the <tt>sun_k5</tt> keymap.
<br>Added a new <b>Snap()</b> action for scripts.
<br>Added new <b>Wait(Disconnect)</b> and <b>Wait(Output)</b> actions for
scripts.
<br>Changed <b>Wait()</b> to <b>Wait(InputField)</b>, <b>Wait(3270)</b>
to <b>Wait(3270Mode)</b> and <b>Wait(ansi)</b> to <b>Wait(NVTMode)</b>.
The old names are still supported for backwards-compatibility.
<br>Fixed a problem with parameter processing in the <b>Transfer()</b>
action.
<br>Improved script tracing.
<br>Added stricter enforcement of user-specified LUs.
<br>Fixed a nit in tracing Query Reply options.
<h2>
Changes in x3270 3.2.8, 1. June 2000</h2>
Fixed a problem with initial host connection negotation, when using a script
(x3270 -script, s3270 or tcl3270) and talking to a non-TN3270E host.
<br>Added lefttack and righttack definitions to the apl keymap.
<br>Added support for IND$FILE file transfers in scripts, via the new Transfer
action.
<br>Added a disconnectClear resource to control clearing the screen after
a host disconnect.
<h2>
Changes in x3270 3.2.7, 30. May 2000</h2>
Fixed a problem with compiling kybd.c on X11R5.
<br>Fixed a problem with the <b>util</b> library on Solaris and AIX.
<br>Fixed several problems with TN3270E SSCP-LU mode: garbled input to
the host, echoed input being overwritten by host output, and keyboard locking
inconsistencies.
<br>Fixed repetition of the contents of the <tt>ibm_hosts</tt> file in
the <b>Connect</b> menu.
<br>Removed the accidental substitution of the symbolic host name with
the resolved hostname in the <b>Connect</b> menu and the window title.
<br>Removed a spurious error on AIX about not being able to find the <tt>rs6000</tt>
keymap.
<br>Added the file <tt>localdefs.h</tt>, to better isolate X11 dependencies
for <b>s3270</b> and <b>tcl3270</b>.
<h2>
Changes in x3270 3.2.6, 19. May 2000</h2>
Fixed a problem with displaying TN3270E options in the "About" pop-up,
even if TN3270E mode had not been negotiated.
<br>Added Sharp APL characters <b>dieresisjot</b>, <b>dieresiscircle</b>,
<b>commabar</b>
and <b>euro</b>, as well as names for the APL-specific versions of <b>braceleft</b>
and <b>braceright</b>.
<br>Added cut-and-paste of EBCDIC DUP and FM characters.
<br>Changed x3270.man.html to x3270-man.html.
<h2>
Changes in x3270 3.2.5, 15. May 2000</h2>
Fixed a problem with scripts hanging in TN3270E SSCP-LU mode.
<h2>
Changes in x3270 3.2.4, 8. May 2000</h2>
Functionally identical to x3270 3.2A3.
<h2>
Changes in x3270 3.2A3, 2. May 2000</h2>
Added support for the Greek character set and a Greek font, <b>3270gr</b>.
<br>Fixed problems with font and color scheme checkboxes not being updated
in the menu bar.
<br>Fixed compiler warnings from not using <tt>time_t</tt>'s properly.
<br>Fixed a problem with the status line improperly reporting disconnections
during certain TN3270E mode switches.
<br>Added TN3270E state to the data stream trace data.
<h2>
Changes in x3270 3.2A2, 27. April 2000</h2>
Due to problems with servers that do not support basic TN3270E, added support
for TN3270E options RESPONSES, SYSREQ and BIND-IMAGE.
<br>Removed disconnect logic when an invalid TN3270E message is received.
<br>Fixed a problem with ignoring the <tt>ibm_hosts</tt> file.
<h2>
Changes in x3270 3.2A1, 9. December 1999</h2>
Added basic TN3270E support.
<h2>
Changes in x3270 3.2A0, 15. March 1999</h2>

<h3>
Internal Changes</h3>
The primary focus of the reorganzation is modularity. For example, through
the new <tt><font size=+1>parts.h</font></tt> header file, it is now possible
to build subsets of x3270, excluding one or more of the following features:
<ul>
<li>
Tracing</li>

<li>
ANSI mode</li>

<li>
Scripting</li>

<li>
Menu bar</li>

<li>
Pop-up keypad</li>

<li>
APL support</li>

<li>
X display</li>
</ul>
This can make for a much smaller footprint for limited applications, as
well as new applications based on components of x3270. For example, a new
program, <i>s3270</i>, is now available, which consists of only the 3270
protocol engine and the scripting facility, allowing x3270 scripts to be
run without an X display.
<p>The code is also reorganized to reduce the amount of explicit coupling
between modules. An event registration mechanism is used to propagate state
changes, instead of explicit calls from one module to another.
<p>The code is now written in ANSI C, using function prototypes and <tt>const</tt>
where appropriate.
<p>Support for X11R4 and K&amp;R C compilers has been dropped.
<h3>
External Changes</h3>
Basic TN3270E is now supported. TN3270E printers are not supported.
<p>On systems that support the <i>forkpty</i>() library call (such as BSD-derived
systems and Linux), x3270 supports local processes.
A local process
is a Unix process such as a shell which is connected to x3270 with a pty.
In this way, x3270 will function as a local terminal emulator like <i>xterm</i>.
<p>All operating modes can now be changed at runtime via menus, including
extended data stream mode, and 3277/3278/3279 emulation.
<p>The "Trace X Events" option has been replaced with a "Trace Keyboard
and Mouse Events" option, which reports only X events which can be mapped
with keymaps. It also reports the keymap that was used to map each action,
making keymap debug much easier.
<p>A menu option allows the current keymap to be displayed.
<p>A new <tt><font size=+1>base</font></tt> keymap is defined, containing
the default keyboard mappings.
This keymap can be modified at will,
without interfering with the basic operation of x3270, or the processing
of X events not related to the keyboard or mouse (as was the case with
the previous default translations resource).
<p>Default keymaps are defined for several well-known keyboards. These
keymaps are automatically used when x3270 recognizes the vendor string
for the associated X server.
<p>Several x3270 bugs, which were in the "impossible to fix" category (because
of basic code organization problems) have finally been fixed.
</body>
</html>

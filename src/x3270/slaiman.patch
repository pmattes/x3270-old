
------- telnet.c -------
0a1,2
> #define DOMTU	1200	/* Don't transmit more than 1200 bytes at a time */
> 
712a715,725
> #if defined(OMTU) /*[*/
> 		int n2w = len;
> 		int pause = 0;
> 
> 		if (n2w > OMTU) {
> 			n2w = OMTU;
> 			pause = 1;
> 		}
> #else
> #define n2w len
> #endif
714c727
< 			nw = write(sock, (char *) buf, len);
---
> 			nw = write(sock, (char *) buf, n2w);
720c733
< 					continue;
---
> 					goto bot;
729c742
< 		ns_bsent += len;
---
> 		ns_bsent += nw;
731a745,750
> 	    bot:
> #if defined(OMTU) /*[*/
> 		if (pause)
> 			sleep(1);
> #endif /*]*/
> 		;
